global
    log /dev/log  haproxy.vsevi.com local0

    chroot /var/lib/haproxy
    stats socket /tmp/haproxy

    # Пользователь и группа, под которыми будет работать процесс haproxy
    user haproxy
    group haproxy

    # Количество работающих процессов
    nbproc 1

    # Запускаемый процесс будет форкаться в бэкграунд
    daemon


defaults
    log  global
    mode tcp

    # Включаем логирование http-запросов
    option    tcplog

    # Не логируем пустые соединения
    option     dontlognull
    contimeout 5000
    clitimeout 50000
    srvtimeout 50000

    # Задаём заглушки для разных кодов ошибок
    errorfile 400 /etc/haproxy/errors/400.http
    errorfile 403 /etc/haproxy/errors/403.http
    errorfile 408 /etc/haproxy/errors/408.http
    errorfile 500 /etc/haproxy/errors/500.http
    errorfile 502 /etc/haproxy/errors/502.http
    errorfile 503 /etc/haproxy/errors/503.http
    errorfile 504 /etc/haproxy/errors/504.http


listen zerorpc 0.0.0.0:1111
    # Режим работы
    mode tcp

    # Опции
    option tcplog

    balance roundrobin
    retries 1

    # Задаём максимальное количество одновременных подключений. При превышении этого значения новые соединения не устанавливаются
    maxconn 16000

    # Группа серверов
    server backend_a 0.0.0.0:4242
    server backend_b 0.0.0.0:4243
    server backend_c 0.0.0.0:4244
